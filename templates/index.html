<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - Student Task Manager</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
    />

    <style>
      /* General Styles */
      body {
        background-color: #f4f6f9;
        font-family: "Poppins", sans-serif;
      }
      nav {
        background-color: white;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }
      /* Add these new styles */
      nav {
        display: grid;
        grid-template-columns: 1fr auto 1fr; /* Creates three columns: left, center, right */
        align-items: center;
        padding: 0 2rem; /* Adds some spacing on the sides */
      }
      .nav-center {
        justify-self: center; /* Centers the item in the middle column */
      }
      .nav-right {
        justify-self: end; /* Pushes the item in the right column to the far right */
      }
      h2 {
        text-align: center;
        margin-bottom: 1.5rem;
      }

      /* --- STYLES FOR YOUR NEW STATS CARDS --- */
      .overview {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 25px;
      }
      .card {
        border-radius: 20px;
        padding: 25px 20px;
        text-align: center;
        color: #fff;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
        transition: 0.3s;
      }
      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.12);
      }
      .card h2 {
        font-size: 2.5rem;
        margin: 0 0 5px;
        font-weight: 700;
      }
      .card p {
        font-size: 1rem;
        margin: 0;
        opacity: 0.9;
      }
      .total {
        background: linear-gradient(135deg, #3b82f6, #60a5fa);
      }
      .completed {
        background: linear-gradient(135deg, #10b981, #34d399);
      }
      .high {
        background: linear-gradient(135deg, #ef4444, #f87171);
      }
      .medium {
        background: linear-gradient(135deg, #f59e0b, #fbbf24);
      }
      .low {
        background: linear-gradient(135deg, #84cc16, #a3e635);
      }

      /* --- STYLES FOR YOUR "ADD TASK" FORM (These are kept) --- */
      .form-card {
        background-color: white;
        padding: 2rem;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        margin-top: 2rem;
        margin-bottom: 2rem;
      }
      .custom-label {
        font-weight: bold;
        color: #106ba3;
      }
      .sky-blue-btn {
        background-color: #03a9f4;
        border-color: #03a9f4;
        color: white;
      }

      /* --- STYLES FOR YOUR TASK LIST (These are from before) --- */
      .task-actions {
        margin-top: 1rem;
        display: flex;
        gap: 0.5rem;
      }
      .completed-task {
        opacity: 0.6;
        border-left: 4px solid #388e3c;
      }
      .completed-task header {
        text-decoration: line-through;
      }
    </style>
  </head>
  <body>
    <nav class="container-fluid">
      <div class="nav-left"></div>
      <div class="nav-center">
        <strong>ðŸŽ“ Student Task Manager</strong>
      </div>
      <div class="nav-right">
        <a href="{{ url_for('logout') }}">Logout</a>
      </div>
    </nav>

    <main class="container">
      <section>
        <hgroup>
          <h2 style="text-align: center">Your Overview</h2>
        </hgroup>
        <div class="overview">
          <div class="card total">
            <h2 id="stats-total">0</h2>
            <p>Total Tasks</p>
          </div>
          <div class="card completed">
            <h2 id="stats-completed">0</h2>
            <p>Completed</p>
          </div>
          <div class="card high">
            <h2 id="stats-high">0</h2>
            <p>High Priority</p>
          </div>
          <div class="card medium">
            <h2 id="stats-medium">0</h2>
            <p>Medium Priority</p>
          </div>
          <div class="card low">
            <h2 id="stats-low">0</h2>
            <p>Low Priority</p>
          </div>
        </div>
      </section>

      <section>
        <article class="form-card">
          <h2>Add a New Task</h2>
          <form id="add-task-form">
            <div class="grid">
              <label for="title"
                >Title
                <input
                  type="text"
                  id="title"
                  name="title"
                  placeholder="e.g., Finish project report"
                  required
                />
              </label>
              <label for="priority"
                >Priority
                <select id="priority" name="priority" required>
                  <option value="low">Low</option>
                  <option value="medium" selected>Medium</option>
                  <option value="high">High</option>
                </select>
              </label>
            </div>
            <label for="notes">Notes</label>
            <textarea
              id="notes"
              name="notes"
              placeholder="Add any details..."
            ></textarea>
            <div class="grid">
              <label for="category" class="custom-label"
                >Category
                <input
                  type="text"
                  id="category"
                  name="category"
                  placeholder="e.g., Physics"
                />
              </label>
              <label for="due_date" class="custom-label"
                >Due Date
                <input type="date" id="due_date" name="due_date" />
              </label>
              <label for="attachment" class="custom-label"
                >File Attachment
                <input type="file" id="attachment" name="attachment" />
              </label>
            </div>
            <button type="submit" class="sky-blue-btn">Add Task</button>
          </form>
        </article>
      </section>

      <hr />
      <h2>Your Tasks</h2>
      <section id="task-list-container"></section>
      <dialog id="edit-modal">
        <article>
          <header>
            <a href="#close" aria-label="Close" class="close"></a>
            <h2>Edit Task</h2>
          </header>
          <form id="edit-task-form">
            <input type="hidden" id="edit-task-id" name="taskId" />

            <label for="edit-title">Title</label>
            <input type="text" id="edit-title" name="title" required />

            <label for="edit-priority">Priority</label>
            <select id="edit-priority" name="priority" required>
              <option value="low">Low</option>
              <option value="medium">Medium</option>
              <option value="high">High</option>
            </select>

            <label for="edit-notes">Notes</label>
            <textarea id="edit-notes" name="notes"></textarea>

            <label for="edit-category">Category</label>
            <input type="text" id="edit-category" name="category" />

            <label for="edit-due_date">Due Date</label>
            <input type="date" id="edit-due_date" name="due_date" />

            <footer>
              <button type="submit">Save Changes</button>
            </footer>
          </form>
        </article>
      </dialog>
    </main>

    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
  </body>
</html>
